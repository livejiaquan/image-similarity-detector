# ğŸ“Œ åœ–ç‰‡ç›¸ä¼¼åº¦æª¢æ¸¬å·¥å…·ä½¿ç”¨èªªæ˜

## **1. å·¥å…·ä»‹ç´¹**
æœ¬å·¥å…·ç”¨æ–¼ **æª¢æ¸¬è³‡æ–™å¤¾ä¸­ç›¸ä¼¼çš„åœ–ç‰‡**ï¼Œä¸¦ç”Ÿæˆå ±å‘Šã€‚

ğŸ”¹ **æ ¸å¿ƒæŠ€è¡“**ï¼š
- ä½¿ç”¨ **ResNet50** æå– **2048 ç¶­ç‰¹å¾µå‘é‡**ã€‚
- è¨ˆç®— **Cosine Similarity ç›¸ä¼¼åº¦çŸ©é™£**ã€‚
- è¨­å®šé–¾å€¼ç¯©é¸ **ç›¸ä¼¼åœ–ç‰‡å°**ã€‚
- **å¯é¸**ï¼šè·¨è³‡æ–™å¤¾æ¯”å° or å…§éƒ¨æ¯”å°ã€‚
- ç”¢å‡º **å ±å‘Š + æ‹¼æ¥åœ–ç‰‡**ã€‚

ğŸ”¹ **æ‡‰ç”¨å ´æ™¯**ï¼š
âœ… æ‰¾å‡º **é‡è¤‡åœ–ç‰‡**ï¼ˆå»é‡ Deduplicationï¼‰
âœ… **ç›£æ§å½±åƒ**ï¼ˆCCTV é‡è¤‡ç•«é¢åµæ¸¬ï¼‰
âœ… **æ¨™è¨»å‰æª¢æŸ¥æ•¸æ“šé›†**ï¼ˆç¢ºä¿ä¸æ¨™è¨˜ç›¸åŒåœ–ç‰‡ï¼‰
âœ… **æ¸›å°‘å­˜å„²ç©ºé–“**ï¼ˆåˆªé™¤é‡è¤‡åœ–ç‰‡ï¼‰

---

## **2. ä½¿ç”¨æ–¹å¼**

### **ğŸ“Œ 2.1 è¨­å®šåƒæ•¸ï¼ˆå¯åœ¨ `main()` å…§èª¿æ•´ï¼‰**

| åƒæ•¸åç¨± | èªªæ˜ | é è¨­å€¼ |
|----------|---------------------------------|-------|
| `folder_list` | è¦æƒæçš„åœ–ç‰‡è³‡æ–™å¤¾åˆ—è¡¨ | `['CCTVforSora/']` |
| `threshold` | ç›¸ä¼¼åº¦é–¾å€¼ï¼ˆè¶Šé«˜è¶Šåš´æ ¼ï¼‰| `0.99` |
| | **èªªæ˜**ï¼šå¦‚æœæ˜¯åœ¨ **å» å€éœæ…‹ CCTV å ´æ™¯**ï¼ŒèƒŒæ™¯å¤§éƒ¨åˆ†ç›¸åŒï¼Œå¯ä»¥è¨­ç½®ç‚º **0.99** ä»¥ç¢ºä¿åªåµæ¸¬å‡ºæ¥µç‚ºç›¸ä¼¼çš„å½±åƒã€‚ |
| `compare_mode` | æ¯”å°æ¨¡å¼ (`full` or `sample`) | `full` |
| `sample_ratio` | è‹¥ `sample` æ¨¡å¼ï¼Œè¨­å®šå–æ¨£æ¯”ä¾‹ | `0.3` (30%) |
| `compare_scope` | `all` (å…¨éƒ¨æ¯”å°) æˆ– `inter_folder` (è·¨è³‡æ–™å¤¾æ¯”å°) | `all` |
| `max_pairs_for_collage` | ç”Ÿæˆæ‹¼æ¥åœ–æ™‚ï¼Œæœ€å¤šæŒ‘é¸å¤šå°‘çµ„ç›¸ä¼¼å° | `20` |

---

### **ğŸ“Œ 2.2 åŸ·è¡Œç¨‹å¼**
ç¢ºä¿ Python ç’°å¢ƒå·²å®‰è£ PyTorchï¼Œç„¶å¾ŒåŸ·è¡Œï¼š
```bash
python image_similarity_detector.py
```

---

## **3. è¼¸å‡ºçµæœ**

### **ğŸ“Œ 3.1 çµ‚ç«¯æ©Ÿè¼¸å‡ºç¯„ä¾‹**
```bash
Total images found: 1500
Threshold = 0.99
Found 235 pairs of images that meet the similarity threshold.
Number of unique groups: 1200
Photos that can be removed if only keeping 1 from each group: 300
Collage saved: results/20250219_123456/similar_pairs_sample/random_collage.jpg
Result JSON: results/20250219_123456/report.json
Done. Output folder: results/20250219_123456
```

### **ğŸ“Œ 3.2 ç”¢å‡ºå ±å‘Šçµæ§‹**
çµæœæœƒå­˜åˆ° `results/` ç›®éŒ„ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
```
results/
â”‚â”€â”€ 20250219_123456/  â† (æœ¬æ¬¡é‹è¡Œçš„è¼¸å‡º)
â”‚   â”œâ”€â”€ report.json  â† (åŒ…å«ç›¸ä¼¼åœ–ç‰‡è³‡è¨Šçš„ JSON)
â”‚   â”œâ”€â”€ similar_pairs_sample/  
â”‚   â”‚   â”œâ”€â”€ random_collage.jpg  â† (éš¨æ©ŸæŒ‘é¸ç›¸ä¼¼åœ–ç‰‡çš„æ‹¼æ¥åœ–)
```

### **ğŸ“Œ 3.3 JSON å ±å‘Šæ ¼å¼ç¯„ä¾‹**
```json
{
    "timestamp": "20250219_123456",
    "folder_list": ["CCTVforSora"],
    "total_images_in_folders": 1500,
    "compare_mode": "full",
    "threshold": 0.99,
    "number_of_similar_pairs": 235,
    "number_of_unique_groups": 1200,
    "photos_to_remove": 300,
    "similar_pairs": [
        {
            "index": 1,
            "image1": "CCTVforSora/img1.jpg",
            "image2": "CCTVforSora/img2.jpg",
            "similarity_score": 0.9956
        },
        {
            "index": 2,
            "image1": "CCTVforSora/img3.jpg",
            "image2": "CCTVforSora/img4.jpg",
            "similarity_score": 0.9923
        }
    ]
}
```
é€™ä»½å ±å‘Šè©³ç´°è¨˜éŒ„äº†ï¼š
- **æ‰¾åˆ°çš„ç›¸ä¼¼åœ–ç‰‡å°**
- **å®ƒå€‘çš„ç›¸ä¼¼åº¦åˆ†æ•¸**
- **å¦‚æœè¦åˆªé™¤é‡è¤‡åœ–ç‰‡ï¼Œæœ€å¤šèƒ½åˆªé™¤å¤šå°‘**

---

## **4. ç¸½çµ**
é€™å€‹å·¥å…·ä½¿ç”¨ **ResNet50 æå–åœ–ç‰‡ç‰¹å¾µ**ï¼Œç„¶å¾Œç”¨ **Cosine Similarity** ä¾†æ¯”è¼ƒåœ–ç‰‡çš„ç›¸ä¼¼åº¦ï¼Œæœ€å¾Œç”Ÿæˆ **å ±å‘Š + æ‹¼æ¥åœ–ç‰‡**ï¼Œå¹«åŠ©ä½¿ç”¨è€…å¿«é€Ÿæª¢æŸ¥ç›¸ä¼¼åœ–ç‰‡ã€‚

âœ¨ **é€™æ¨£çš„èªªæ˜æ¸…æ¥šå—ï¼Ÿå¦‚æœæœ‰ä»»ä½•å•é¡Œï¼Œæ­¡è¿è©¢å•ï¼ğŸ˜Š**